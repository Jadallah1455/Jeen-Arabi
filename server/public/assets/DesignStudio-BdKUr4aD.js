import{c as v,a as w,T as N,r as i,j as e,S as g}from"./index-CuPKqFX8.js";import{D as S}from"./download-Ch1bAcSC.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],C=v("wand-sparkles",$),E=async(r,a,s)=>{try{return(await w.post("/ai/generate-story",{title:r,elements:a,language:s})).data.story||"Could not generate story."}catch(o){return console.error("Gemini API Error:",o),"Sorry, I couldn't write the story right now. Please try again later!"}},T=({lang:r})=>{const a=N[r].design,[s,o]=i.useState([]),[n,p]=i.useState(""),[l,c]=i.useState(""),[x,h]=i.useState(!1),y=i.useRef(null),b=t=>{const d={id:Date.now().toString(),type:"sticker",content:t,x:Math.random()*200,y:Math.random()*200,scale:1};o([...s,d])},u=async()=>{if(!n&&s.length===0)return;h(!0),c("");const t=s.map(k=>{const m=g.find(j=>j.icon===k.content);return m?m.name:"Unknown Object"}),d=await E(n||"Untitled",t,r);c(d),h(!1)},f=t=>{o(s.filter(d=>d.id!==t))};return e.jsx("div",{className:"min-h-screen bg-background dark:bg-dark-bg py-8 px-4 transition-colors duration-300",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("h1",{className:`text-3xl font-bold text-gray-800 dark:text-white mb-2 ${r==="ar"?"text-right font-arabic":""}`,children:a.title}),e.jsx("p",{className:`text-gray-500 dark:text-gray-400 mb-8 ${r==="ar"?"text-right font-arabic":""}`,children:a.subtitle}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-2xl shadow-md dark:shadow-none border border-transparent dark:border-gray-700 p-6 h-fit transition-colors",children:[e.jsx("h3",{className:`font-bold text-lg mb-4 text-gray-900 dark:text-white ${r==="ar"?"text-right font-arabic":""}`,children:a.tools}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 ${r==="ar"?"text-right":""}`,children:a.addText}),e.jsx("input",{type:"text",value:n,onChange:t=>p(t.target.value),placeholder:a.placeholderTitle,className:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-primary focus:border-primary placeholder-gray-400 dark:placeholder-gray-500 transition-colors ${r==="ar"?"text-right":""}`})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 ${r==="ar"?"text-right":""}`,children:a.addSticker}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:g.map(t=>e.jsx("button",{onClick:()=>b(t.icon),className:"aspect-square bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl text-3xl flex items-center justify-center transition-colors border border-gray-100 dark:border-gray-700",children:t.icon},t.id))})]}),e.jsx("button",{onClick:u,disabled:x||!n&&s.length===0,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-primary to-secondary text-white py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transition-all disabled:opacity-50",children:x?e.jsx("span",{children:a.generating}):e.jsxs(e.Fragment,{children:[e.jsx(C,{size:20}),a.generate]})})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{ref:y,className:"relative aspect-[4/3] bg-white rounded-2xl shadow-inner border-2 border-dashed border-gray-300 dark:border-gray-600 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#6C63FF 1px, transparent 1px)",backgroundSize:"20px 20px"}}),n&&e.jsx("div",{className:"absolute top-10 left-0 right-0 text-center px-8 pointer-events-none",children:e.jsx("h1",{className:`text-4xl font-extrabold text-gray-800 break-words drop-shadow-sm ${r==="ar"?"font-arabic":"font-sans"}`,children:n})}),s.map(t=>e.jsx("div",{className:"absolute cursor-pointer hover:scale-110 transition-transform select-none",style:{left:`${t.x+50}px`,top:`${t.y+100}px`,fontSize:"4rem"},onClick:()=>f(t.id),title:"Click to remove",children:t.content},t.id)),s.length===0&&!n&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-300 pointer-events-none",children:e.jsx("span",{className:"text-lg",children:"Canvas Empty"})})]}),l&&e.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-2xl shadow-lg dark:shadow-none p-8 border-t-4 border-accent animate-fade-in transition-colors",children:[e.jsx("h2",{className:`text-2xl font-bold text-gray-800 dark:text-white mb-4 ${r==="ar"?"text-right font-arabic":""}`,children:r==="ar"?"قصتك":"Your Story"}),e.jsx("p",{className:`text-lg leading-relaxed text-gray-700 dark:text-gray-300 whitespace-pre-line ${r==="ar"?"text-right font-arabic":"font-sans"}`,children:l}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{className:"text-primary hover:text-primary-dark font-medium flex items-center gap-2",children:[e.jsx(S,{size:18}),"Save Story"]})})]})]})]})]})})};export{T as DesignStudio};
