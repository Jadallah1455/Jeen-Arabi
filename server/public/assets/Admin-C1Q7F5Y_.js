import{j as e}from"./pdf-D5M-G2vY.js";import{r as m,e as ve}from"./vendor-CvWOdSKG.js";import{u as Q,v as ke,w as q,x as Z,y as Ne,A as we,H as Ce,J as Se,Y as Te,K as Le,N as $e,O as Ae,p as F,E as ze,D as Fe,Q as E,o as M,Z as _,t as Ee,X as V,_ as De,$ as Ie,G as Ue,z as c}from"./ui-DVHeSrky.js";import{T as Pe,a as f}from"./index-fyEpOTAP.js";import"./utils-B9ygI19o.js";const Be=({lang:k,stories:j,setStories:S,subscribers:D,setSubscribers:W})=>{const i=Pe[k].admin,h=k==="ar",[N,ee]=m.useState("dashboard"),[re,w]=m.useState(!1),[d,u]=m.useState({}),[I,B]=m.useState(""),[K,O]=m.useState(""),[Y,X]=m.useState(""),[C,U]=m.useState(!1),[ae,$]=m.useState(null),[T,P]=m.useState(""),[G,A]=m.useState([]),[se,z]=m.useState(!1),[g,v]=m.useState({});ve.useEffect(()=>{(async()=>{try{const s=await f.get("/categories");A(s.data)}catch(s){console.error("Failed to fetch categories",s)}})()},[]);const R=m.useMemo(()=>Array.from(new Set(j.flatMap(r=>r.tags||[]))),[j]),te=async r=>{if(window.confirm("Are you sure you want to delete this story?")){const s=c.loading("Deleting...");try{await f.delete(`/stories/${r}`),S(a=>a.filter(t=>t.id!==r)),c.success("Story deleted",{id:s})}catch(a){console.error(a),c.error("Failed to delete story",{id:s})}}},de=r=>{u({...r}),w(!0)},le=()=>{u({id:Date.now().toString(),title:{en:"",ar:"",fr:""},description:{en:"",ar:"",fr:""},availableLanguages:["en"],coverImage:"",pdfUrl:"",ageGroup:"3-5",categoryLabel:"English",tags:[],views:0,downloads:0}),w(!0)},H=r=>{if(r==null||r.preventDefault(),!I.trim())return;const s=d.tags||[],a=I.trim();s.includes(a)||u({...d,tags:[...s,a]}),B("")},ie=r=>{const s=d.tags||[];u({...d,tags:s.filter(a=>a!==r)})},J=async(r,s)=>{var n,b,y;const a=(n=r.target.files)==null?void 0:n[0];if(!a)return;const t=s==="cover"?"coverImage":"pdfUrl",l=d[t],o=new FormData;o.append("file",a),l&&o.append("oldFileUrl",l);const x=c.loading("Uploading...");try{const p=await f.post("/upload",o,{headers:{"Content-Type":"multipart/form-data"}});u(L=>({...L,[t]:p.data.url})),c.success("Uploaded successfully",{id:x})}catch(p){console.error(p);const L=((y=(b=p.response)==null?void 0:b.data)==null?void 0:y.message)||p.message||"Upload failed";c.error(L,{id:x})}},ne=async()=>{var x;if(!((x=d.availableLanguages)==null?void 0:x.some(n=>{var b,y;return(y=(b=d.title)==null?void 0:b[n])==null?void 0:y.trim()}))){c.error("Please enter a title for at least one of the selected languages.");return}if(!d.coverImage){c.error("Please upload a cover image.");return}if(!d.pdfUrl){c.error("Please upload a PDF file.");return}let s="English";const a=d.availableLanguages||[];a.length>2?s="Trilingual":a.length===2?s="Bilingual":a.includes("ar")?s="Arabic":a.includes("fr")&&(s="French");const t={...d,categoryLabel:s},l=!j.find(n=>n.id===d.id),o=c.loading("Saving story...");try{let n;if(l){const{id:b,...y}=t;n=(await f.post("/stories",y)).data,S(L=>[...L,n])}else n=(await f.put(`/stories/${d.id}`,t)).data,S(y=>y.map(p=>p.id===n.id?n:p));c.success("Story saved successfully",{id:o}),w(!1),u({})}catch(n){console.error(n),c.error("Failed to save story",{id:o})}},oe=r=>{const s=d.availableLanguages||[];let a;s.includes(r)?a=s.filter(t=>t!==r):a=[...s,r],u({...d,availableLanguages:a})},ce=async r=>{r.preventDefault();const s=c.loading("Adding subscriber...");try{const a=await f.post("/subscribers",{name:Y,email:K,ageGroupPreference:"All",languagePreference:k,gdprConsent:C});W([...D,a.data]),X(""),O(""),U(!1),c.success("Subscriber added",{id:s})}catch(a){console.error(a),c.error("Failed to add subscriber",{id:s})}},ge=r=>{if(!T.trim()||T===r){$(null);return}window.confirm(`Rename tag "${r}" to "${T}" across all stories?`)&&S(s=>s.map(a=>({...a,tags:a.tags.map(t=>t===r?T.trim():t)}))),$(null),P("")},xe=r=>{window.confirm(`Are you sure you want to delete tag "${r}"? It will be removed from ALL stories.`)&&S(s=>s.map(a=>({...a,tags:a.tags.filter(t=>t!==r)})))},be=async()=>{var s,a;if(!((s=g.name)!=null&&s.en)&&!((a=g.name)!=null&&a.ar)){c.error("Category name is required");return}const r=c.loading("Saving category...");try{if(g.id){const t=await f.put(`/categories/${g.id}`,g);A(l=>l.map(o=>o.id===t.data.id?t.data:o))}else{const t=await f.post("/categories",g);A(l=>[...l,t.data])}c.success("Category saved",{id:r}),z(!1),v({})}catch(t){console.error(t),c.error("Failed to save category",{id:r})}},me=async r=>{if(window.confirm("Delete this category?"))try{await f.delete(`/categories/${r}`),A(s=>s.filter(a=>a.id!==r)),c.success("Category deleted")}catch(s){console.error(s),c.error("Failed to delete category")}},he=()=>e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[{label:"Total Stories",value:j.length,color:"bg-blue-500",icon:e.jsx(Q,{className:"text-white"})},{label:"Total Views",value:j.reduce((r,s)=>r+s.views,0),color:"bg-green-500",icon:e.jsx(ke,{className:"text-white"})},{label:"Active Subscribers",value:D.length,color:"bg-purple-500",icon:e.jsx(q,{className:"text-white"})},{label:"Unique Tags",value:R.length,color:"bg-yellow-500",icon:e.jsx(Z,{className:"text-white"})}].map(r=>e.jsx("div",{className:"bg-white dark:bg-dark-card overflow-hidden shadow-sm rounded-2xl transition-all hover:shadow-md border border-gray-100 dark:border-gray-700",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex-shrink-0 rounded-xl p-3 shadow-lg ${r.color}`,children:r.icon}),e.jsx("div",{className:`w-0 flex-1 ${h?"mr-5":"ml-5"}`,children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate text-left rtl:text-right",children:r.label}),e.jsx("dd",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1 text-left rtl:text-right",children:r.value})]})})]})})},r.label))}),e.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-sm rounded-2xl p-6 border border-gray-100 dark:border-gray-700",children:[e.jsx("h3",{className:`text-lg leading-6 font-bold text-gray-900 dark:text-white mb-6 ${h?"text-right":"text-left"}`,children:"Story Engagement"}),e.jsx("div",{className:"h-80 w-full",dir:"ltr",children:e.jsx(Ne,{width:"100%",height:"100%",children:e.jsxs(we,{data:j.map(r=>({name:(r.title.en||r.title.ar||r.title.fr||"").substring(0,10),views:r.views})),margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(Ce,{strokeDasharray:"3 3",opacity:.1}),e.jsx(Se,{dataKey:"name",stroke:"#888888"}),e.jsx(Te,{stroke:"#888888"}),e.jsx(Le,{contentStyle:{backgroundColor:"#1f2937",color:"#fff",border:"none",borderRadius:"8px"},itemStyle:{color:"#fff"}}),e.jsx($e,{}),e.jsx(Ae,{dataKey:"views",fill:"#6C63FF",radius:[4,4,0,0],name:"Views"})]})})})]})]}),ue=()=>e.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-sm rounded-2xl p-6 border border-gray-100 dark:border-gray-700 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Z,{size:20,className:"text-primary"}),"Manage Categories (Tags)"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Edit or delete tags globally"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[R.map(r=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700",children:ae===r?e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("input",{autoFocus:!0,type:"text",value:T,onChange:s=>P(s.target.value),className:"flex-1 px-2 py-1 text-sm rounded bg-white dark:bg-gray-700 border border-primary outline-none"}),e.jsx("button",{onClick:()=>ge(r),className:"p-1 bg-green-500 text-white rounded",children:e.jsx(Ee,{size:14})}),e.jsx("button",{onClick:()=>$(null),className:"p-1 bg-gray-400 text-white rounded",children:e.jsx(V,{size:14})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"font-bold text-gray-700 dark:text-gray-300",children:[r,e.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-400",children:["(",j.filter(s=>s.tags.includes(r)).length," stories)"]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{$(r),P(r)},className:"p-1.5 text-blue-500 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded",children:e.jsx(E,{size:16})}),e.jsx("button",{onClick:()=>xe(r),className:"p-1.5 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",children:e.jsx(M,{size:16})})]})]})},r)),R.length===0&&e.jsx("p",{className:"col-span-3 text-center text-gray-400 py-8",children:"No tags found. Add tags to stories first."})]})]}),ye=()=>{var r,s,a,t;return e.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-sm rounded-2xl p-6 border border-gray-100 dark:border-gray-700 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(_,{size:20,className:"text-primary"}),i.manageCategories]}),e.jsxs("button",{onClick:()=>{v({name:{},description:{}}),z(!0)},className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-xl text-sm font-bold",children:[e.jsx(F,{size:16})," ",i.addCategory]})]}),se&&e.jsxs("div",{className:"mb-8 bg-gray-50 dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-bold mb-4 dark:text-white",children:g.id?i.editCategory:i.addCategory}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 dark:text-gray-300",children:i.nameEn}),e.jsx("input",{value:((r=g.name)==null?void 0:r.en)||"",onChange:l=>v({...g,name:{...g.name,en:l.target.value}}),className:"w-full p-2 rounded border dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 dark:text-gray-300",children:i.nameAr}),e.jsx("input",{value:((s=g.name)==null?void 0:s.ar)||"",onChange:l=>v({...g,name:{...g.name,ar:l.target.value}}),className:"w-full p-2 rounded border dark:bg-gray-700 dark:border-gray-600 dark:text-white font-arabic text-right"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold mb-1 dark:text-gray-300",children:i.descEn}),e.jsx("textarea",{value:((a=g.description)==null?void 0:a.en)||"",onChange:l=>v({...g,description:{...g.description,en:l.target.value}}),className:"w-full p-2 rounded border dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:2})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold mb-1 dark:text-gray-300",children:i.descAr}),e.jsx("textarea",{value:((t=g.description)==null?void 0:t.ar)||"",onChange:l=>v({...g,description:{...g.description,ar:l.target.value}}),className:"w-full p-2 rounded border dark:bg-gray-700 dark:border-gray-600 dark:text-white font-arabic text-right",rows:2})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 text-gray-500",children:i.cancel}),e.jsx("button",{onClick:be,className:"px-4 py-2 bg-primary text-white rounded-lg font-bold",children:i.saveCategory})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:G.map(l=>{var o,x,n;return e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 relative group",children:[e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>{v(l),z(!0)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",children:e.jsx(E,{size:14})}),e.jsx("button",{onClick:()=>me(l.id),className:"p-1.5 bg-red-100 text-red-600 rounded-lg",children:e.jsx(M,{size:14})})]}),e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-1",children:[(o=l.name)==null?void 0:o.en," / ",(x=l.name)==null?void 0:x.ar]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:(n=l.description)==null?void 0:n.en})]},l.id)})})]})},pe=()=>{var s;const r=["en","ar","fr"];return e.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-lg rounded-2xl p-8 animate-slide-up border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-100 dark:border-gray-700 pb-4",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[d.id?e.jsx(E,{size:24,className:"text-primary"}):e.jsx(F,{size:24,className:"text-primary"}),d.id?i.editStory:i.createStory]}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-red-500",children:e.jsx(V,{size:24})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-5 rounded-xl border border-blue-100 dark:border-blue-800",children:[e.jsxs("label",{className:`block text-sm font-bold text-blue-900 dark:text-blue-100 mb-3 flex items-center gap-2 ${h?"flex-row-reverse":""}`,children:[e.jsx(Ue,{size:16})," ",i.availableLangs]}),e.jsx("div",{className:"space-y-2",children:r.map(a=>{var t,l,o;return e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-white/50 dark:hover:bg-black/20 transition-colors",children:[e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center ${(t=d.availableLanguages)!=null&&t.includes(a)?"bg-primary border-primary text-white":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600"}`,children:((l=d.availableLanguages)==null?void 0:l.includes(a))&&e.jsx(q,{size:14})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:(o=d.availableLanguages)==null?void 0:o.includes(a),onChange:()=>oe(a)}),e.jsx("span",{className:"uppercase font-bold text-sm text-gray-700 dark:text-gray-300",children:a})]},a)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 ${h?"text-right":"text-left"}`,children:i.categories}),e.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-300 dark:border-gray-600",children:[G.map(a=>{var t,l,o,x;return e.jsxs("label",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg border cursor-pointer transition-all ${(t=d.categories)!=null&&t.includes(a.id)?"bg-primary/10 border-primary text-primary":"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300"}`,children:[e.jsx("input",{type:"checkbox",className:"hidden",checked:((l=d.categories)==null?void 0:l.includes(a.id))||!1,onChange:()=>{const n=d.categories||[],b=n.includes(a.id)?n.filter(y=>y!==a.id):[...n,a.id];u({...d,categories:b})}}),e.jsx("span",{className:"text-xs font-bold",children:((o=a.name)==null?void 0:o.en)||((x=a.name)==null?void 0:x.ar)})]},a.id)}),G.length===0&&e.jsx("span",{className:"text-xs text-gray-400",children:"No categories available. Add them in the Categories tab."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 ${h?"text-right":"text-left"}`,children:"Age Group"}),e.jsxs("select",{value:d.ageGroup,onChange:a=>u({...d,ageGroup:a.target.value}),className:"w-full p-3 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-primary outline-none transition-all dark:text-white",children:[e.jsx("option",{value:"3-5",children:"Toddlers (3-5)"}),e.jsx("option",{value:"6-8",children:"Early Readers (6-8)"}),e.jsx("option",{value:"9-12",children:"Young Readers (9-12)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 ${h?"text-right":"text-left"}`,children:"Tags (Categories)"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:I,onChange:a=>B(a.target.value),onKeyDown:a=>a.key==="Enter"&&H(a),placeholder:"Add tag...",className:"flex-1 p-2 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm dark:text-white"}),e.jsx("button",{onClick:H,className:"bg-gray-200 dark:bg-gray-700 p-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 dark:text-white",children:e.jsx(F,{size:18})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(s=d.tags)==null?void 0:s.map(a=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary/10 text-primary rounded-md text-xs font-bold",children:[a,e.jsx("button",{onClick:()=>ie(a),className:"hover:text-red-500",children:e.jsx(V,{size:12})})]},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 ${h?"text-right":"text-left"}`,children:"Cover Image"}),e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 overflow-hidden relative",children:[d.coverImage?e.jsx("img",{src:d.coverImage,alt:"Preview",className:"w-full h-full object-cover opacity-80"}):e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx(_,{className:"mx-auto mb-2"}),e.jsx("span",{className:"text-xs",children:"Click to Upload Cover"})]}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:a=>J(a,"cover")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 ${h?"text-right":"text-left"}`,children:"PDF File"}),e.jsxs("label",{className:"flex items-center gap-3 w-full p-3 border border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(Q,{className:"text-red-500"}),e.jsx("span",{className:"text-sm truncate text-gray-600 dark:text-gray-300 flex-1",children:d.pdfUrl?"File Selected":"Upload PDF"}),e.jsx("input",{type:"file",className:"hidden",accept:"application/pdf",onChange:a=>J(a,"pdf")})]})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-6",children:r.map(a=>{var o,x,n;if(!((o=d.availableLanguages)!=null&&o.includes(a)))return null;const t=a==="ar",l=a==="en"?"English":a==="ar"?"Arabic":"French";return e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-5 border border-gray-200 dark:border-gray-700 relative",children:[e.jsxs("div",{className:`absolute -top-3 px-2 bg-white dark:bg-dark-card text-xs font-bold uppercase text-primary border border-gray-100 dark:border-gray-700 rounded-md shadow-sm ${h?"right-4":"left-4"}`,children:[l," Content"]}),e.jsxs("div",{className:"grid gap-4 mt-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1 ${h?"text-right":"text-left"}`,children:["Title (",a,")"]}),e.jsx("input",{dir:t?"rtl":"ltr",value:((x=d.title)==null?void 0:x[a])||"",onChange:b=>u({...d,title:{...d.title,[a]:b.target.value}}),className:`w-full p-3 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-primary dark:text-white ${t?"font-arabic":"font-sans"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1 ${h?"text-right":"text-left"}`,children:["Description (",a,")"]}),e.jsx("textarea",{dir:t?"rtl":"ltr",rows:2,value:((n=d.description)==null?void 0:n[a])||"",onChange:b=>u({...d,description:{...d.description,[a]:b.target.value}}),className:`w-full p-3 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-primary dark:text-white ${t?"font-arabic":"font-sans"}`})]})]})]},a)})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-6 py-2.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-xl",children:i.cancel}),e.jsx("button",{onClick:ne,className:"px-6 py-2.5 bg-primary text-white rounded-xl shadow-lg flex items-center gap-2 font-bold",children:i.save})]})]})},fe=()=>e.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-sm rounded-2xl overflow-hidden border border-gray-100 dark:border-gray-700 animate-fade-in",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50",children:[e.jsx("h3",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-white",children:i.stories}),e.jsxs("button",{onClick:le,className:"flex items-center gap-2 bg-primary hover:bg-primary-dark text-white px-5 py-2.5 rounded-xl text-sm font-bold shadow-md",children:[e.jsx(F,{size:18}),i.addStory]})]}),re?e.jsx("div",{className:"p-6 bg-gray-50 dark:bg-dark-bg",children:pe()}):e.jsx("ul",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:j.map(r=>{var a;const s=r.title[k]||r.title.en||Object.values(r.title)[0]||"Untitled";return e.jsx("li",{className:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-200 dark:bg-gray-700 overflow-hidden shadow-sm flex-shrink-0",children:e.jsx("img",{className:"h-full w-full object-cover",src:r.coverImage,alt:""})}),e.jsxs("div",{className:`min-w-0 ${h?"mr-4":"ml-4"}`,children:[e.jsx("p",{className:`text-base font-bold text-gray-900 dark:text-white truncate ${k==="ar"&&r.title[k]?"font-arabic":""}`,children:s}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300",children:r.ageGroup}),e.jsx("div",{className:"flex gap-1",children:(a=r.availableLanguages)==null?void 0:a.map(t=>e.jsx("span",{className:"uppercase text-[10px] font-bold px-1.5 py-0.5 rounded bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 border border-blue-100 dark:border-blue-800",children:t},t))})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6 px-4 hidden sm:flex",children:[e.jsxs("div",{className:"flex flex-col items-center min-w-[60px]",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(ze,{size:12})," Views"]}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:r.views.toLocaleString()})]}),e.jsxs("div",{className:"flex flex-col items-center min-w-[60px]",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(Fe,{size:12})," Downloads"]}),e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:(r.downloads||0).toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>de(r),className:"p-2 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg",children:e.jsx(E,{size:18})}),e.jsx("button",{onClick:()=>te(r.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",children:e.jsx(M,{size:18})})]})]})},r.id)})})]}),je=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-sm rounded-2xl p-8 border border-gray-100 dark:border-gray-700 animate-fade-in",children:[e.jsxs("h3",{className:"text-xl font-bold mb-6 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(De,{size:20,className:"text-primary"}),i.addSubscriber]}),e.jsxs("form",{onSubmit:ce,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx("input",{type:"text",placeholder:"Full Name",required:!0,value:Y,onChange:r=>X(r.target.value),className:"w-full p-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-xl outline-none dark:text-white"}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,value:K,onChange:r=>O(r.target.value),className:"w-full p-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-xl outline-none dark:text-white"})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-100 dark:border-blue-800",children:[e.jsx("button",{type:"button",onClick:()=>U(!C),className:`mt-0.5 flex-shrink-0 transition-colors ${C?"text-primary":"text-gray-400"}`,children:C?e.jsx(q,{size:22}):e.jsx(Ie,{size:22})}),e.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300 cursor-pointer select-none",onClick:()=>U(!C),children:i.gdprLabel})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:!C,className:"px-8 py-3 bg-primary text-white rounded-xl font-bold shadow-lg disabled:opacity-50",children:i.addSubscriber})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-sm rounded-2xl overflow-hidden border border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-5 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[i.subscribers," List"]})}),e.jsx("ul",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:D.map(r=>e.jsxs("li",{className:"px-6 py-4 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:r.name}),e.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",children:r.subscribedAt||"2024-01-01"})]},r.id))})]})]});return e.jsx("div",{className:"min-h-screen bg-background dark:bg-dark-bg py-8 px-4 sm:px-6 lg:px-8 transition-colors duration-300",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white animate-fade-in",children:i.title})}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-8 overflow-x-auto",children:e.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[{id:"dashboard",label:i.analytics},{id:"stories",label:i.stories},{id:"categories",label:i.categories},{id:"tags",label:"Tags"},{id:"subscribers",label:i.subscribers}].map(r=>e.jsx("button",{onClick:()=>{ee(r.id),w(!1)},className:`${N===r.id?"border-primary text-primary":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300 dark:hover:border-gray-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-all`,children:r.label},r.id))})}),e.jsxs("div",{children:[N==="dashboard"&&he(),N==="stories"&&fe(),N==="categories"&&ye(),N==="tags"&&ue(),N==="subscribers"&&je()]})]})})};export{Be as Admin};
